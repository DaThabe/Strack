<UserControl
    x:Class="Strack.Desktop.UI.Controls.Pagination"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cb="clr-namespace:CalcBinding;assembly=CalcBinding"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Strack.Desktop.UI.Controls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    mc:Ignorable="d">

    <UserControl.Resources>

        <SolidColorBrush
            x:Key="PaginationNumberButtonBorderBrush"
            Opacity="0.5"
            Color="{DynamicResource SystemFillColorAttention}" />

        <Style TargetType="RadioButton">

            <Setter Property="GroupName" Value="PageNumber" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">

                        <ToggleButton
                            HorizontalContentAlignment="Center"
                            Background="Transparent"
                            BorderThickness="0"
                            Content="{TemplateBinding Content}"
                            Foreground="#fff"
                            IsChecked="{TemplateBinding IsChecked}" />

                        <ControlTemplate.Triggers>

                            <Trigger Property="IsChecked" Value="True">
                                <Setter Property="BorderThickness" Value="1" />
                                <Setter Property="BorderBrush" Value="{DynamicResource PaginationNumberButtonBorderBrush}" />
                            </Trigger>

                        </ControlTemplate.Triggers>

                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </UserControl.Resources>

    <DockPanel VerticalAlignment="Center" Visibility="{cb:Binding 'Last>1', RelativeSource={RelativeSource AncestorType=local:Pagination}}">

        <!--  跳转  -->
        <StackPanel
            Margin="5,0"
            DockPanel.Dock="Right"
            Orientation="Horizontal">

            <ui:TextBlock
                Padding="0"
                VerticalAlignment="Center"
                Text="跳转到" />
            <ui:TextBox
                MinWidth="30"
                Margin="3"
                Padding="5,0"
                VerticalAlignment="Center"
                KeyDown="OnGotoPageKeyDown"
                Text="n"
                TextAlignment="Center" />
            <ui:TextBlock
                Padding="0"
                VerticalAlignment="Center"
                Text="页" />

        </StackPanel>

        <!--  前一页  -->
        <ui:Button
            Width="30"
            Height="30"
            Padding="0"
            Background="Transparent"
            BorderThickness="0"
            Click="OnPrevButtonClicked"
            DockPanel.Dock="Left"
            Icon="{ui:SymbolIcon Symbol=ArrowLeft24}"
            Visibility="{cb:Binding 'Last!=2',
                                    RelativeSource={RelativeSource AncestorType=local:Pagination}}" />
        <!--  下一页  -->
        <ui:Button
            Width="30"
            Height="30"
            Padding="0"
            Background="Transparent"
            BorderThickness="0"
            Click="OnNextButtonClicked"
            DockPanel.Dock="Right"
            Icon="{ui:SymbolIcon Symbol=ArrowRight24}"
            Visibility="{cb:Binding 'Last!=2',
                                    RelativeSource={RelativeSource AncestorType=local:Pagination}}" />


        <!--  快速跳转  -->
        <DockPanel>

            <!--  首页  -->
            <RadioButton
                x:Name="FirstRadioButton"
                Width="Auto"
                Height="30"
                Padding="0"
                HorizontalAlignment="Center"
                d:Content="999"
                Click="OnFirstPageClick"
                Content="{Binding First, RelativeSource={RelativeSource AncestorType=local:Pagination}}"
                DockPanel.Dock="Left" />
            <!--  向前5页  -->
            <ui:Button
                Width="30"
                Height="30"
                Padding="0"
                HorizontalAlignment="Center"
                Background="Transparent"
                BorderThickness="0"
                Click="OnPrevPagesButtonClick"
                DockPanel.Dock="Left"
                Icon="{ui:SymbolIcon Symbol=MoreHorizontal24}" />

            <!--  尾页  -->
            <RadioButton
                x:Name="LastRadioButton"
                Width="Auto"
                Height="30"
                Padding="0"
                HorizontalAlignment="Center"
                d:Content="99999"
                Click="OnLastPageClick"
                Content="{Binding Last, RelativeSource={RelativeSource AncestorType=local:Pagination}}"
                DockPanel.Dock="Right" />
            <!--  向后5页  -->
            <ui:Button
                Width="30"
                Height="30"
                Padding="0"
                Background="Transparent"
                BorderThickness="0"
                Click="OnNextPagesButtonClick"
                DockPanel.Dock="Right"
                Icon="{ui:SymbolIcon Symbol=MoreHorizontal24}" />

            <!--  中间页码  -->
            <ItemsControl
                x:Name="PageRadioButtonItemsSource"
                d:ItemsSource="{d:SampleData ItemCount=5}"
                ItemsSource="{Binding ItemsSource, RelativeSource={RelativeSource AncestorType=local:Pagination}}">

                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

            </ItemsControl>

        </DockPanel>

    </DockPanel>
</UserControl>
