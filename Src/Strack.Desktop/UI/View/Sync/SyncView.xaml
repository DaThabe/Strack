<UserControl
    x:Class="Strack.Desktop.UI.View.Sync.SyncView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:activity="clr-namespace:Strack.Desktop.ViewModel.View.Sync.Activity"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Strack.Desktop.UI.View.Sync"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sync="clr-namespace:Strack.Desktop.ViewModel.View.Sync"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:user="clr-namespace:Strack.Desktop.ViewModel.View.Sync.User"
    d:DataContext="{d:DesignInstance Type=sync:SyncViewModel}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">

    <UserControl.Resources>

        <!--  用户元素模板  -->
        <DataTemplate DataType="{x:Type user:UserItemViewModel}">
            <ui:Card Padding="10">

                <DockPanel>

                    <!--  同步  -->
                    <ui:Button
                        Command="{Binding PullCommand}"
                        DockPanel.Dock="Right"
                        Icon="{ui:SymbolIcon Symbol=ArrowCounterclockwise24}" />

                    <!--  数据  -->
                    <StackPanel Orientation="Horizontal">
                        <ui:Image
                            Width="20"
                            Height="20"
                            Margin="5"
                            CornerRadius="5"
                            Source="{Binding Avatar}" />
                        <ui:TextBlock VerticalAlignment="Center" Text="{Binding Name}" />
                    </StackPanel>

                </DockPanel>

            </ui:Card>
        </DataTemplate>

        <!--  活动元素模板  -->
        <DataTemplate DataType="{x:Type activity:ActivityItemViewModel}">
            <ui:CardControl Padding="5">

                <!--  数据  -->
                <ui:CardControl.Header>
                    <ScrollViewer
                        Padding="5"
                        HorizontalScrollBarVisibility="Auto"
                        VerticalScrollBarVisibility="Disabled">
                        <DockPanel>

                            <!--  时间  -->
                            <StackPanel
                                Width="150"
                                Margin="10"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                DockPanel.Dock="Left"
                                Orientation="Horizontal">
                                <ui:SymbolIcon
                                    Margin="5"
                                    VerticalAlignment="Center"
                                    Symbol="Clock24" />
                                <ui:TextBlock VerticalAlignment="Center" Text="{Binding Time, StringFormat=\{yyyy-MM-dd HH:mm\}}" />
                            </StackPanel>

                            <!--  距离  -->
                            <StackPanel
                                Width="80"
                                Margin="10"
                                DockPanel.Dock="Left"
                                Orientation="Horizontal">
                                <ui:SymbolIcon Margin="5" Symbol="DataLine20" />
                                <ui:TextBlock VerticalAlignment="Center" Text="{Binding RecordPointCount}" />
                            </StackPanel>

                            <!--  用时  -->
                            <StackPanel
                                Width="80"
                                Margin="10"
                                DockPanel.Dock="Left"
                                Orientation="Horizontal">
                                <ui:SymbolIcon
                                    Margin="5"
                                    VerticalAlignment="Center"
                                    Symbol="Clock24" />
                                <ui:TextBlock VerticalAlignment="Center" Text="{Binding RecordPointCount}" />
                            </StackPanel>

                            <!--  标题  -->
                            <ui:TextBlock
                                Width="Auto"
                                Margin="10"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Text="{Binding Title}" />

                        </DockPanel>
                    </ScrollViewer>
                </ui:CardControl.Header>

                <DockPanel>

                    <!--  同步  -->
                    <ui:Button
                        Margin="5"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        DockPanel.Dock="Right"
                        Icon="{ui:SymbolIcon Symbol=ArrowSync24}" />



                </DockPanel>
            </ui:CardControl>
        </DataTemplate>

    </UserControl.Resources>
    <DockPanel>

        <!--  用户列表  -->
        <DockPanel>

            <ui:CardControl
                Margin="0,0,0,5"
                DockPanel.Dock="Top"
                Header="添加账户">
                <ui:Button Appearance="Primary" Content="添加" />
            </ui:CardControl>

            <ui:ListView d:ItemsSource="{d:SampleData ItemCount=3}" ItemsSource="{Binding Users}">

                <ui:ListView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel Orientation="Vertical" />
                    </ItemsPanelTemplate>
                </ui:ListView.ItemsPanel>

                <ui:ListView.Template>
                    <ControlTemplate>
                        <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                            <ItemsPresenter />
                        </ScrollViewer>
                    </ControlTemplate>
                </ui:ListView.Template>

            </ui:ListView>

        </DockPanel>

        <ItemsControl
            Margin="5,0,0,0"
            d:ItemsSource="{d:SampleData ItemCount=3}"
            ItemsSource="{Binding SelectedUser.Activities}">

            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <VirtualizingStackPanel Orientation="Vertical" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ItemsControl.Template>
                <ControlTemplate>
                    <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                        <ItemsPresenter />
                    </ScrollViewer>
                </ControlTemplate>
            </ItemsControl.Template>

        </ItemsControl>

    </DockPanel>

</UserControl>
